<main>
  <header>
    <div class="w-full flex justify-start items-start bg-slate-100 p-5">
      <div class="flex gap-5 items-center">
        <p class="text-[26px]">ตรวจสอบคำร้องขอฝึกงานของนิสิต</p>
        <i class="fa-solid fa-book fa-bounce fa-xl"></i>
        <span class="mt-[11px] text-slate-400">ตรวจสอบคำร้องขอฝึกงานของนิสิต</span>
      </div>
    </div>
    <div class="flex">
      <div class="w-full h-[5rem] flex justify-center items-center bg-slate-100">
        <div class="grid gap-5">
          <div class="flex justify-center items-center gap-5">
            <input type="text" [(ngModel)]="searchFilter"
              class="rounded-md w-[50rem] h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="ค้นหาโดย รหัสนิสิต ชื่อ นามสกุล สถานประกอบการ เเละอื่นๆ" />
          </div>
        </div>
      </div>
    </div>
    <!-- <div>
      <div class="items-center justify-center gap-5 flex bg-slate-100">
        <span>* ตามลำดับ</span>
        <div class="flex items-center gap-5">
          <i style="color : #E76161" class="fa-solid fa-file-pdf fa-bounce fa-xl"></i>
          <p> ขอความอนุเคราะห์</p>
        </div>
        <div class="flex items-center gap-5">
          <i style="color : #E76161" class="fa-solid fa-file-pdf fa-bounce fa-xl"></i>
          <p> แบบตอบรับ/ปฏิเสธ</p>
        </div>
        <div class="flex items-center gap-5">
          <i style="color : #E76161" class="fa-solid fa-file-pdf fa-bounce fa-xl"></i>
          <p> ส่งนิสิตเข้าฝึกงาน</p>
        </div>
      </div>
    </div> -->
  </header>

  <body>
    <ng-container *ngIf=" data_petition$ | async as data">
      <table class="table">
        <thead>
          <tr class="bg-slate-100">
            <!-- <th class="w-[5%]"> ลำดับ </th> -->
            <!-- <th class="w-[15%]"> เลขเอกสาร </th> -->
            <!-- <th class="w-[10%]"> รหัสนิสิต </th> -->
            <!-- <th class="w-[15%]" colspan="2"> ชื่อ - นามสกุล </th> -->
            <th class="w-[20%]"> สถานประกอบการ </th>
            <th class="w-[15%]"> รอบที่ลง </th>
            <th class="w-[20%]"> สถานะ </th>
            <!-- <th class="w-[20%]"> รายละเอียดการอนุมัติ </th> -->
            <th class="w-[20%]"> จัดการ </th>
          </tr>
        </thead>
        <tbody *ngFor="let item of data | filter:searchFilter ; let i = index">
          <!-- <tr [ngClass]="item.is_approved_success ? 'bg-green-100' : ''"> -->
          <tr
            [ngClass]="item.is_approved_success ? 'bg-green-100' : (item.is_approved_cancel ? 'bg-red-100' : (item.is_approved_report || !item.is_approved_report ? 'bg-yellow-100' : ''))">

            <!-- <td> {{ i + 1 }} </td> -->
            <!-- <td> {{ item.id }} </td> -->
            <!-- <td> {{ item.student_code }} </td> -->
            <!-- <td> {{ item.name }} </td> -->
            <!-- <td> {{ item.surname }} </td> -->
            <td> {{ item.company }} </td>
            <td> {{ getPetitionRound(item.round_petition) }} </td>
            <td> {{ DoGetStatusApprove(item) }} </td>
            <!-- <td> {{ item.is_teacher_approve }} |
                 {{ item.is_date_approve }} |
                 {{ item.is_time_approve }}</td> -->
            <td class="text-center" [colSpan]="1">
              <div class="flex gap-5 justify-center items-center col-span-2">
                <button *ngIf="item.is_approved_admin_report === true" (click)="DoViewPDF(item)"
                  class="shadow-md rounded-md h-[40px] px-1 bg-red-500 hover:bg-red-600 cursor-pointer"
                  style="transition: 0.5s" title="ขอความอนุเคราะห์รับนิสิตฝึกงาน">
                  <div class="flex justify-center items-center gap-2">
                    <i style="color: #fff;"
                      [ngClass]="item.url_response.length ? 'fa-solid fa-file-pdf fa-xl fa-xl fa-bounce' : 'fa-solid fa-file-pdf fa-xl fa-bounce fa-xl'"></i>
                  </div>
                </button>
                <button *ngIf="item.url_response.length > 5" (click)="DoViewDetailsResponse(item)"
                  class="shadow-md rounded-md h-[40px] px-1 bg-red-500 hover:bg-red-600 cursor-pointer"
                  style="transition: 0.5s" title="แบบตอบรับ/ปฏิเสธการฝึกงาน">
                  <div class="flex justify-center items-center gap-2">
                    <i class="fa-solid fa-file-pdf fa-bounce fa-xl" style="color: #fff;"></i>
                  </div>
                </button>
                <button *ngIf="item.is_approved_student_success === true && item.is_approved_success === true"
                  (click)="DoViewPDF2(item)"
                  class="shadow-md rounded-md h-[40px] px-1 bg-red-500 hover:bg-red-600 cursor-pointer"
                  style="transition: 0.5s" title="หนังสือส่งตัวนิสิต">
                  <div class="flex justify-center items-center gap-2">
                    <i style="color: #fff;"
                      [ngClass]="item.url_response.length ? 'fa-solid fa-file-pdf fa-xl fa-xl fa-bounce' : 'fa-solid fa-file-pdf fa-xl fa-bounce fa-xl'"></i>
                  </div>
                </button>
                <button (click)="DoViewDetails(item)"
                  class="shadow-md rounded-md h-[40px] px-1 bg-blue-500 hover:bg-blue-600 cursor-pointer"
                  style="transition: 0.5s" title="ดูรายละเอียด">
                  <div class="flex justify-center items-center gap-2">
                    <i style="color: #fff;"
                      [ngClass]="item.url_response.length ? 'fa-solid fa-magnifying-glass fa-xl fa-xl' : 'fa-solid fa-magnifying-glass fa-xl fa-bounce fa-xl'"></i>
                  </div>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </ng-container>
  </body>
  <footer></footer>
</main>
