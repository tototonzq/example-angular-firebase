<main class="p-10">
  <header class="flex justify-between">
    <div class="flex gap-2">
      <p class="text-[26px]">จัดการคำร้อง</p>
      <span class="mt-[11px] text-slate-400">จัดการคำร้อง</span>
    </div>
    <div class="flex items-center gap-2">
      <ng-container *ngIf="round_petition$ | async as data">
        <p class="text-[26px]">{{ getRoundCode(data) }}</p>
      </ng-container>
      <i class="fa-solid fa-clock fa-bounce fa-xl"></i>
    </div>
  </header>

  <body class="mt-10">
    <div class="flex items-center gap-2">
      <p class="ml-3">ตารางบันทึกข้อมูล</p>
      <i class="fa-solid fa-feather fa-bounce fa-xl"></i>
    </div>
    <ng-container *ngIf="data_petition$ | async as data">
      <div *ngIf="data.length != 1; else Success" class="grid gap-4 border-[1px] mt-2 p-5 rounded-md bg-slate-100">
        <form [formGroup]="form" class="grid gap-5" (ngSubmit)="onCreatePetition()">
          <div class="flex gap-5">
            <select formControlName="prefix" class="shadow-md rounded-md w-[30rem] h-10 pl-2">
              <option value='' selected disabled>คำนำหน้า</option>
              <ng-container *ngFor="let option of dropdown">
                <option [value]="option.value">
                  {{ option.name }}
                </option>
              </ng-container>
            </select>
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="ชื่อ" formControlName="name" />
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="นามสกุล " formControlName="surname" />
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="รหัสนิสิต " formControlName="student_code" />
          </div>
          <div class="flex gap-5">
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="ชั้นปีที่ " formControlName="year" />
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="สาขาวิชา " formControlName="major" />
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="หมายเลขโทรศัพท์ " formControlName="phone_number" />
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="อีเมล์ " formControlName="email" />
          </div>
          <div class="flex gap-5">
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="ที่อยู่อาศัย " formControlName="address" />
          </div>
          <div>
            <textarea formControlName="address_details"
              placeholder="ที่อยู่โดยละเอียด เช่น บ้านเลขที่ , หมู่บ้าน , ตำบล/แขวง , อำเภอ/เขต , จังหวัด , รหัสไปรษณีย์ และอื่นๆ "
              class="max-h-28 min-h-[112px] p-2 rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"></textarea>
          </div>
          <div>
            <input type="text"
              class="rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"
              placeholder="สถานที่ฝึกงาน " formControlName="company" />
          </div>
          <div>
            <textarea formControlName="company_details"
              placeholder="ข้อมูลสภานที่ฝึกงานโดยละเอียด เช่น บ้านเลขที่ , หมู่บ้าน , ตำบล/แขวง , อำเภอ/เขต , จังหวัด , รหัสไปรษณีย์ และอื่นๆ "
              class="max-h-28 min-h-[112px] p-2 rounded-md w-full h-10 shadow-md focus:outline-none pl-5 placeholder:text-slate-500 text-slate-500 text-ellipsis"></textarea>
          </div>
          <div class="justify-end flex">
            <button
              class="h-10 shadow-md rounded-md w-[20rem] text-slate-100 ml-5 hover:bg-blue-500 bg-blue-300 hover:text-slate-100 hover:w-[21rem]"
              style="transition: 0.5s" type="submit">
              <div class="flex items-center gap-2 justify-center">
                <i class="fa-solid fa-box-archive fa-shake" style="color: #fff;"></i>
                <p class="text-[#fff]">ส่งแบบฟอร์ม</p>
              </div>
            </button>
            <!-- <button
              class="h-10 shadow-md rounded-md w-[20rem] text-slate-100 ml-5 hover:bg-blue-500 bg-blue-300 hover:text-slate-100 hover:w-[21rem]"
              style="transition: 0.5s" type="submit">
              + Add
            </button> -->
          </div>
        </form>
      </div>
      <ng-template #Success>
        <div>
          <div class="grid gap-4 border-[1px] mt-2 p-5 rounded-md bg-slate-100">
            <p>ส่งแบบฟอร์มเรียบร้อยแล้ว</p>
          </div>
        </div>
      </ng-template>
    </ng-container>

  </body>
  <footer></footer>

  <ng-container>
    <app-loaders-screen *ngIf="(status_loading$ | async) === true"></app-loaders-screen>
  </ng-container>
</main>
