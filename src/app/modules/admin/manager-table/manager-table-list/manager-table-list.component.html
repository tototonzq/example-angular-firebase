<main class="p-10">
  <header>
    <div class="flex gap-5 items-center">
      <p class="text-[26px]">ข้อมูลผู้ใช้งาน</p>
      <i class="fa-solid fa-user fa-bounce fa-xl"></i>
      <span class="mt-[11px] text-slate-400">ข้อมูลผู้ใช้งาน</span>
    </div>
  </header>

  <body class="grid gap-5 mt-10">
    <p>ข้อมูลผู้ใช้งาน</p>
    <div>
      <div class="flex gap-5">
        <div class="w-full">
          <input type="text" [(ngModel)]="searchTextFilter" class="border-[1px]"
            placeholder="ค้นหาโดย รหัสประจำตัว & ผู้ใช้">
        </div>
        <select [formControl]="role" [(ngModel)]="setRoleFilter"
          class="border-[1px] shadow-md rounded-md bg-slate-100 hover:bg-slate-200" style="transition: 0.5s;">
          <option value='' selected disabled>
            <p> สิทธิ์การเข้าถึง </p>
          </option>
          <ng-container *ngFor="let option of dropdown">
            <option [value]="option.value">
              <p>{{ option.name }}</p>
            </option>
          </ng-container>
        </select>
        <!-- <div class="w-40">
          <button class="bg-slate-100 hover:bg-slate-200" style="transition: 0.5s;">ค้นหา</button>
        </div> -->
      </div>
    </div>
    <div class="border-x-[1px] border-t-[1px] rounded-md">
      <ng-container *ngIf="data$ | async as data">
        <table class="table">
          <thead>
            <tr class="bg-slate-100">
              <th class="w-[100px]">ลำดับ</th>
              <th class="w-[200px]">รหัสประจำตัว</th>
              <!-- <th>ชื่อผู้ใช้งาน</th> -->
              <th class="w-[100px]">ผู้ใช้</th>
              <th class="w-[400px]">คณะ</th>
              <th class="w-[300px]">สาขา</th>
              <!-- <th>รหัสผ่าน</th> -->
              <th class="w-[100px]">ตำแหน่ง</th>
              <th class="w-[300px]">จัดการ</th>
            </tr>
          </thead>
          <!-- {{data | json}} -->
          <tbody
            *ngFor="let row of data | filter:searchTextFilter || setRoleFilter | slice:(page - 1) * pageSize:page * pageSize ; let i = index">
            <tr>
              <td>{{ i + 1 }}</td>
              <td>{{ row.code }}</td>
              <!-- <td>{{ row.user }}</td> -->
              <td> {{ row.username }}</td>
              <td> {{ row.group }} </td>
              <td> {{ row.major }} </td>
              <!-- <td>
                  <p class="text-red-500">*********</p>
                </td> -->
              <td>{{ getRole(row.role) }}</td>
              <td class="text-center" [colSpan]="1">
                <div class="flex gap-5 justify-center items-center">
                  <div class="shadow-md rounded-md h-[40px] px-5 bg-red-300 hover:bg-red-500 cursor-pointer"
                    style="transition: 0.5s" (click)="delete(row)">
                    <div class="pt-2">
                      <i class="fa-solid fa-trash-can fa-xl" style="color: #fff;"></i>
                    </div>
                  </div>
                  <div class="shadow-md rounded-md h-[40px] px-5 bg-yellow-300 hover:bg-yellow-500 cursor-pointer"
                    style="transition: 0.5s" (click)="detail(row)">
                    <div class="pt-2">
                      <i class="fa-solid fa-gear fa-xl" style="color: #fff;"></i>
                    </div>
                  </div>
                  <!-- <div class="shadow-md rounded-md h-[40px] px-5 bg-blue-300 hover:bg-blue-500 cursor-pointer"
                    style="transition: 0.5s">
                    <div class="pt-2">
                      <i class="fa-solid fa-circle-info fa-xl" style="color: #fff;"></i>
                    </div>
                  </div> -->
                </div>
              </td>
            </tr>
          </tbody>
          <tbody *ngIf="((data.length === 0)&&(isCheckedStatusGetAllUsers !== false))">
            <td [colSpan]="9">ไม่พบข้อมูล .</td>
          </tbody>
        </table>
        <ng-container *ngIf="((data.length === 0)&&(isCheckedStatusGetAllUsers === false))">
          <div class="w-[5rem] justify-center items-center m-auto py-[30vh]">
            <app-loaders></app-loaders>
          </div>
        </ng-container>
        <hr *ngIf="isCheckedStatusGetAllUsers === false">
      </ng-container>
    </div>
    <div>
      <div class="flex justify-between">
        <div class="justify-center items-center flex">
          <p> <span class="font-bold"> หน้า </span> <span class="text-[20px]">[ {{ page }} ]</span>
            <!-- <span
              class="font-bold"> รายการทั้งหมด </span> <span class="text-[20px]">[ {{
              data.length }} ]</span> -->
            <!-- แสดง 1 - 10 จาก 3 หน้า 3 -->
          </p>
        </div>
        <div class="flex gap-5">
          <button class="h-[3rem] w-[10rem] bg-slate-100 hover:bg-slate-200" style="transition: 0.5s;"
            (click)="page = page - 1" [disabled]="page === 1">หน้าก่อนหน้า</button>
          <button class="h-[3rem] w-[10rem] bg-slate-100 hover:bg-slate-200" style="transition: 0.5s;"
            (click)="page = page + 1" [disabled]="page * pageSize >= (data$ | async).length">หน้าถัดไป</button>
        </div>
      </div>
    </div>
  </body>

  <footer>
  </footer>

  <ng-container *ngIf="isCheckedStatusGetAllUsers !== false">
    <app-loaders-screen *ngIf="isCheckedStatusDelete === true"></app-loaders-screen>
  </ng-container>
</main>
